{"ast":null,"code":"'use strict';\n\nvar fs = require('fs');\n\nvar qs = require('querystring');\n\nvar validate = require('har-validator');\n\nvar extend = require('extend');\n\nfunction Har(request) {\n  this.request = request;\n}\n\nHar.prototype.reducer = function (obj, pair) {\n  // new property ?\n  if (obj[pair.name] === undefined) {\n    obj[pair.name] = pair.value;\n    return obj;\n  } // existing? convert to array\n\n\n  var arr = [obj[pair.name], pair.value];\n  obj[pair.name] = arr;\n  return obj;\n};\n\nHar.prototype.prep = function (data) {\n  // construct utility properties\n  data.queryObj = {};\n  data.headersObj = {};\n  data.postData.jsonObj = false;\n  data.postData.paramsObj = false; // construct query objects\n\n  if (data.queryString && data.queryString.length) {\n    data.queryObj = data.queryString.reduce(this.reducer, {});\n  } // construct headers objects\n\n\n  if (data.headers && data.headers.length) {\n    // loweCase header keys\n    data.headersObj = data.headers.reduceRight(function (headers, header) {\n      headers[header.name] = header.value;\n      return headers;\n    }, {});\n  } // construct Cookie header\n\n\n  if (data.cookies && data.cookies.length) {\n    var cookies = data.cookies.map(function (cookie) {\n      return cookie.name + '=' + cookie.value;\n    });\n\n    if (cookies.length) {\n      data.headersObj.cookie = cookies.join('; ');\n    }\n  } // prep body\n\n\n  function some(arr) {\n    return arr.some(function (type) {\n      return data.postData.mimeType.indexOf(type) === 0;\n    });\n  }\n\n  if (some(['multipart/mixed', 'multipart/related', 'multipart/form-data', 'multipart/alternative'])) {\n    // reset values\n    data.postData.mimeType = 'multipart/form-data';\n  } else if (some(['application/x-www-form-urlencoded'])) {\n    if (!data.postData.params) {\n      data.postData.text = '';\n    } else {\n      data.postData.paramsObj = data.postData.params.reduce(this.reducer, {}); // always overwrite\n\n      data.postData.text = qs.stringify(data.postData.paramsObj);\n    }\n  } else if (some(['text/json', 'text/x-json', 'application/json', 'application/x-json'])) {\n    data.postData.mimeType = 'application/json';\n\n    if (data.postData.text) {\n      try {\n        data.postData.jsonObj = JSON.parse(data.postData.text);\n      } catch (e) {\n        this.request.debug(e); // force back to text/plain\n\n        data.postData.mimeType = 'text/plain';\n      }\n    }\n  }\n\n  return data;\n};\n\nHar.prototype.options = function (options) {\n  // skip if no har property defined\n  if (!options.har) {\n    return options;\n  }\n\n  var har = {};\n  extend(har, options.har); // only process the first entry\n\n  if (har.log && har.log.entries) {\n    har = har.log.entries[0];\n  } // add optional properties to make validation successful\n\n\n  har.url = har.url || options.url || options.uri || options.baseUrl || '/';\n  har.httpVersion = har.httpVersion || 'HTTP/1.1';\n  har.queryString = har.queryString || [];\n  har.headers = har.headers || [];\n  har.cookies = har.cookies || [];\n  har.postData = har.postData || {};\n  har.postData.mimeType = har.postData.mimeType || 'application/octet-stream';\n  har.bodySize = 0;\n  har.headersSize = 0;\n  har.postData.size = 0;\n\n  if (!validate.request(har)) {\n    return options;\n  } // clean up and get some utility properties\n\n\n  var req = this.prep(har); // construct new options\n\n  if (req.url) {\n    options.url = req.url;\n  }\n\n  if (req.method) {\n    options.method = req.method;\n  }\n\n  if (Object.keys(req.queryObj).length) {\n    options.qs = req.queryObj;\n  }\n\n  if (Object.keys(req.headersObj).length) {\n    options.headers = req.headersObj;\n  }\n\n  function test(type) {\n    return req.postData.mimeType.indexOf(type) === 0;\n  }\n\n  if (test('application/x-www-form-urlencoded')) {\n    options.form = req.postData.paramsObj;\n  } else if (test('application/json')) {\n    if (req.postData.jsonObj) {\n      options.body = req.postData.jsonObj;\n      options.json = true;\n    }\n  } else if (test('multipart/form-data')) {\n    options.formData = {};\n    req.postData.params.forEach(function (param) {\n      var attachment = {};\n\n      if (!param.fileName && !param.contentType) {\n        options.formData[param.name] = param.value;\n        return;\n      } // attempt to read from disk!\n\n\n      if (param.fileName && !param.value) {\n        attachment.value = fs.createReadStream(param.fileName);\n      } else if (param.value) {\n        attachment.value = param.value;\n      }\n\n      if (param.fileName) {\n        attachment.options = {\n          filename: param.fileName,\n          contentType: param.contentType ? param.contentType : null\n        };\n      }\n\n      options.formData[param.name] = attachment;\n    });\n  } else {\n    if (req.postData.text) {\n      options.body = req.postData.text;\n    }\n  }\n\n  return options;\n};\n\nexports.Har = Har;","map":{"version":3,"names":["fs","require","qs","validate","extend","Har","request","prototype","reducer","obj","pair","name","undefined","value","arr","prep","data","queryObj","headersObj","postData","jsonObj","paramsObj","queryString","length","reduce","headers","reduceRight","header","cookies","map","cookie","join","some","type","mimeType","indexOf","params","text","stringify","JSON","parse","e","debug","options","har","log","entries","url","uri","baseUrl","httpVersion","bodySize","headersSize","size","req","method","Object","keys","test","form","body","json","formData","forEach","param","attachment","fileName","contentType","createReadStream","filename","exports"],"sources":["D:/siit/Y4S1/senior_project/web_practice1/my-app/node_modules/request/lib/har.js"],"sourcesContent":["'use strict'\n\nvar fs = require('fs')\nvar qs = require('querystring')\nvar validate = require('har-validator')\nvar extend = require('extend')\n\nfunction Har (request) {\n  this.request = request\n}\n\nHar.prototype.reducer = function (obj, pair) {\n  // new property ?\n  if (obj[pair.name] === undefined) {\n    obj[pair.name] = pair.value\n    return obj\n  }\n\n  // existing? convert to array\n  var arr = [\n    obj[pair.name],\n    pair.value\n  ]\n\n  obj[pair.name] = arr\n\n  return obj\n}\n\nHar.prototype.prep = function (data) {\n  // construct utility properties\n  data.queryObj = {}\n  data.headersObj = {}\n  data.postData.jsonObj = false\n  data.postData.paramsObj = false\n\n  // construct query objects\n  if (data.queryString && data.queryString.length) {\n    data.queryObj = data.queryString.reduce(this.reducer, {})\n  }\n\n  // construct headers objects\n  if (data.headers && data.headers.length) {\n    // loweCase header keys\n    data.headersObj = data.headers.reduceRight(function (headers, header) {\n      headers[header.name] = header.value\n      return headers\n    }, {})\n  }\n\n  // construct Cookie header\n  if (data.cookies && data.cookies.length) {\n    var cookies = data.cookies.map(function (cookie) {\n      return cookie.name + '=' + cookie.value\n    })\n\n    if (cookies.length) {\n      data.headersObj.cookie = cookies.join('; ')\n    }\n  }\n\n  // prep body\n  function some (arr) {\n    return arr.some(function (type) {\n      return data.postData.mimeType.indexOf(type) === 0\n    })\n  }\n\n  if (some([\n    'multipart/mixed',\n    'multipart/related',\n    'multipart/form-data',\n    'multipart/alternative'])) {\n    // reset values\n    data.postData.mimeType = 'multipart/form-data'\n  } else if (some([\n    'application/x-www-form-urlencoded'])) {\n    if (!data.postData.params) {\n      data.postData.text = ''\n    } else {\n      data.postData.paramsObj = data.postData.params.reduce(this.reducer, {})\n\n      // always overwrite\n      data.postData.text = qs.stringify(data.postData.paramsObj)\n    }\n  } else if (some([\n    'text/json',\n    'text/x-json',\n    'application/json',\n    'application/x-json'])) {\n    data.postData.mimeType = 'application/json'\n\n    if (data.postData.text) {\n      try {\n        data.postData.jsonObj = JSON.parse(data.postData.text)\n      } catch (e) {\n        this.request.debug(e)\n\n        // force back to text/plain\n        data.postData.mimeType = 'text/plain'\n      }\n    }\n  }\n\n  return data\n}\n\nHar.prototype.options = function (options) {\n  // skip if no har property defined\n  if (!options.har) {\n    return options\n  }\n\n  var har = {}\n  extend(har, options.har)\n\n  // only process the first entry\n  if (har.log && har.log.entries) {\n    har = har.log.entries[0]\n  }\n\n  // add optional properties to make validation successful\n  har.url = har.url || options.url || options.uri || options.baseUrl || '/'\n  har.httpVersion = har.httpVersion || 'HTTP/1.1'\n  har.queryString = har.queryString || []\n  har.headers = har.headers || []\n  har.cookies = har.cookies || []\n  har.postData = har.postData || {}\n  har.postData.mimeType = har.postData.mimeType || 'application/octet-stream'\n\n  har.bodySize = 0\n  har.headersSize = 0\n  har.postData.size = 0\n\n  if (!validate.request(har)) {\n    return options\n  }\n\n  // clean up and get some utility properties\n  var req = this.prep(har)\n\n  // construct new options\n  if (req.url) {\n    options.url = req.url\n  }\n\n  if (req.method) {\n    options.method = req.method\n  }\n\n  if (Object.keys(req.queryObj).length) {\n    options.qs = req.queryObj\n  }\n\n  if (Object.keys(req.headersObj).length) {\n    options.headers = req.headersObj\n  }\n\n  function test (type) {\n    return req.postData.mimeType.indexOf(type) === 0\n  }\n  if (test('application/x-www-form-urlencoded')) {\n    options.form = req.postData.paramsObj\n  } else if (test('application/json')) {\n    if (req.postData.jsonObj) {\n      options.body = req.postData.jsonObj\n      options.json = true\n    }\n  } else if (test('multipart/form-data')) {\n    options.formData = {}\n\n    req.postData.params.forEach(function (param) {\n      var attachment = {}\n\n      if (!param.fileName && !param.contentType) {\n        options.formData[param.name] = param.value\n        return\n      }\n\n      // attempt to read from disk!\n      if (param.fileName && !param.value) {\n        attachment.value = fs.createReadStream(param.fileName)\n      } else if (param.value) {\n        attachment.value = param.value\n      }\n\n      if (param.fileName) {\n        attachment.options = {\n          filename: param.fileName,\n          contentType: param.contentType ? param.contentType : null\n        }\n      }\n\n      options.formData[param.name] = attachment\n    })\n  } else {\n    if (req.postData.text) {\n      options.body = req.postData.text\n    }\n  }\n\n  return options\n}\n\nexports.Har = Har\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}